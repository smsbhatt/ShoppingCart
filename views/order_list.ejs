
<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
         <script src="socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
        <title>JSP Page</title>
    </head>
    <body  onload="return retreive()">
       
      
    <script type="text/javascript">
       function retreive(){
            var d; 
            //return display();
            if (localStorage && localStorage.getItem('Address')) {
        var Address = JSON.parse(localStorage.getItem('Address'));
        d=Address.FName;
        d+=" "+ Address.LName;
        d+=" "+ Address.Address;
        d+= " "+Address.Mob;
        d+=" "+ Address.Email;
        
        
                }
                var Total=0;
                var s="";
                var subtot=0;
            if(localStorage.getItem('cart')) {
             var cartitem = JSON.parse(localStorage.getItem('cart'));
           //  console.log('cart:::',cartitem);
             
             s+="<center><h3>Your Shipping Details</h3><form action='/Shipping' onsubmit='return Ship()' name='f1' method='post'><table border='2'><tr><th>Product Name</th><th>Brand</th><th>Qty</th><th>price</th><th>About</th><th>Total</th><th>Address</th></tr> ";
             for(var key in cartitem){
                 Total=cartitem[key].price*cartitem[key].qty;
                 
                 s+= "<tr>";
                  s+= "<td><input value="+cartitem[key].name+" type='text' name='Pname'></td>";
                  s+= "<td><input value="+cartitem[key].brand+" type='text' name='Bname'></td>";
                  
                  s+= "<td><input value="+parseInt(cartitem[key].qty)+" type='text' name='qty'></td> ";
                  s+= "<td><input value="+cartitem[key].price+" type='text' name='Price'></td> ";
                  s+= "<td><input value="+cartitem[key].About+" type='text' name='About'></td>";
                  s+= "<td><span id='Total"+key+"'>"+Total+"</span></td>";
                  s+="<td><span id=Address>"+d+"</span></td>";
                  s+= "</tr>";
                 subtot+=Total;
             }
             
                 
             s+="<tr><td colspan='8'>";
               
                     s+="<input type='submit' value='Confirm Shipping'/>Rs.<span id='total'>"+subtot+"</span></td></tr></table><span id='Msg'>*</span></form></center>";
             document.getElementById("txt").innerHTML=s;
             
        } else {
            cartitem = {}; 
        }
       // console.log('cart',cartitem);
        //cartitem[prod_id] = qty;
        
        
        return false;
        }
// Put the object into storage
       // localStorage.setItem('Cart', JSON.stringify(cartitem));
         
            
    
       var socket = io();
      function Ship(){
        socket.emit('Ship', {'cart':localStorage.getItem('cart'),'Address':localStorage.getItem('Address')});
        
        return true;
      }
      socket.on('Ship', function(msg){
       
      });
      
  
      
        </script>

        
        <div id="txt"></div>
        
    </body>
</html>
